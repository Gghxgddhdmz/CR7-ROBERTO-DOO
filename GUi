local GuiLib = {}
local UIS = game:GetService("UserInputService")

local screenGui = Instance.new("ScreenGui", game.CoreGui)
screenGui.Name = "CustomOrionGUI"

local MainFrame = Instance.new("Frame", screenGui)
MainFrame.Size = UDim2.new(0, 600, 0, 400)
MainFrame.Position = UDim2.new(0.3, 0, 0.3, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 10)
MainFrame.ClipsDescendants = true

local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1, 0, 0, 40)
Title.Text = "ğŸ® GUI HUB"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.TextScaled = true
Title.Font = Enum.Font.GothamBold

local TabsHolder = Instance.new("Frame", MainFrame)
TabsHolder.Size = UDim2.new(0, 140, 1, -40)
TabsHolder.Position = UDim2.new(0, 0, 0, 40)
TabsHolder.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Instance.new("UICorner", TabsHolder).CornerRadius = UDim.new(0, 6)

local UIListTabs = Instance.new("UIListLayout", TabsHolder)
UIListTabs.SortOrder = Enum.SortOrder.LayoutOrder
UIListTabs.Padding = UDim.new(0, 6)

local Pages = Instance.new("Folder", MainFrame)

----------------------------------------------------------------
-- âœ… MakeWindow
function GuiLib.MakeWindow(settings)
	Title.Text = settings.Hub.Title or "GUI Hub"
end

----------------------------------------------------------------
-- âœ… NewTab
function GuiLib.NewTab(name)
	local button = Instance.new("TextButton", TabsHolder)
	button.Size = UDim2.new(1, -10, 0, 30)
	button.Text = name
	button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	button.TextColor3 = Color3.fromRGB(255, 255, 255)
	button.Font = Enum.Font.Gotham
	button.TextScaled = true
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 6)

	local tabPage = Instance.new("ScrollingFrame", Pages)
	tabPage.Size = UDim2.new(1, -150, 1, -50)
	tabPage.Position = UDim2.new(0, 150, 0, 40)
	tabPage.Visible = false
	tabPage.CanvasSize = UDim2.new(0, 0, 0, 0)
	tabPage.ScrollBarThickness = 4
	tabPage.BackgroundTransparency = 1
	local layout = Instance.new("UIListLayout", tabPage)
	layout.SortOrder = Enum.SortOrder.LayoutOrder
	layout.Padding = UDim.new(0, 6)

	button.MouseButton1Click:Connect(function()
		for _, child in pairs(Pages:GetChildren()) do
			child.Visible = false
		end
		tabPage.Visible = true
	end)

	return tabPage
end

----------------------------------------------------------------
-- âœ… AddSection
function GuiLib.AddSection(tab, text)
	local label = Instance.new("TextLabel", tab)
	label.Size = UDim2.new(1, -20, 0, 25)
	label.Text = "ğŸ”¹ " .. text
	label.TextColor3 = Color3.fromRGB(160, 160, 255)
	label.BackgroundTransparency = 1
	label.TextScaled = true
	label.Font = Enum.Font.GothamMedium
end

----------------------------------------------------------------
-- âœ… AddButton
function GuiLib.AddButton(tab, settings)
	local btn = Instance.new("TextButton", tab)
	btn.Size = UDim2.new(1, -20, 0, 35)
	btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	btn.Text = settings.Name or "Button"
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Font = Enum.Font.Gotham
	btn.TextScaled = true
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)

	btn.MouseButton1Click:Connect(function()
		pcall(settings.Callback)
	end)
end

----------------------------------------------------------------
-- âœ… AddSlider
function GuiLib.AddSlider(tab, settings)
	local slider = Instance.new("TextButton", tab)
	slider.Size = UDim2.new(1, -20, 0, 35)
	slider.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
	slider.Text = settings.Name .. ": " .. settings.Default
	slider.TextColor3 = Color3.fromRGB(255, 255, 255)
	slider.TextScaled = true
	slider.Font = Enum.Font.Gotham
	Instance.new("UICorner", slider).CornerRadius = UDim.new(0, 6)

	local value = settings.Default

	slider.MouseButton1Click:Connect(function()
		value = (value + settings.Increment)
		if value > settings.Max then value = settings.Min end
		slider.Text = settings.Name .. ": " .. value
		pcall(settings.Callback, value)
	end)
end

----------------------------------------------------------------
-- âœ… AddKeybind
function GuiLib.AddKeybind(tab, settings)
	local keybind = Instance.new("TextButton", tab)
	keybind.Size = UDim2.new(1, -20, 0, 35)
	keybind.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
	keybind.Text = "ğŸ”‘ " .. (settings.Name or "Keybind") .. ": [" .. tostring(settings.Default) .. "]"
	keybind.TextColor3 = Color3.fromRGB(255, 255, 255)
	keybind.Font = Enum.Font.Gotham
	keybind.TextScaled = true
	Instance.new("UICorner", keybind).CornerRadius = UDim.new(0, 6)

	local currentKey = settings.Default

	keybind.MouseButton1Click:Connect(function()
		keybind.Text = "Press any key..."
		local conn
		conn = UIS.InputBegan:Connect(function(input, gameProcessed)
			if not gameProcessed and input.UserInputType == Enum.UserInputType.Keyboard then
				currentKey = input.KeyCode
				keybind.Text = "ğŸ”‘ " .. settings.Name .. ": [" .. tostring(currentKey) .. "]"
				conn:Disconnect()
			end
		end)
	end)

	UIS.InputBegan:Connect(function(input, gameProcessed)
		if input.KeyCode == currentKey then
			pcall(settings.Callback)
		end
	end)
end

----------------------------------------------------------------
-- âœ… AddTextBox
function GuiLib.AddTextBox(tab, settings)
	local box = Instance.new("TextBox", tab)
	box.Size = UDim2.new(1, -20, 0, 35)
	box.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	box.Text = settings.PlaceholderText or ""
	box.TextColor3 = Color3.fromRGB(255, 255, 255)
	box.PlaceholderText = settings.PlaceholderText or "Ø§ÙƒØªØ¨ Ù‡Ù†Ø§"
	box.Font = Enum.Font.Gotham
	box.TextScaled = true
	Instance.new("UICorner", box).CornerRadius = UDim.new(0, 6)

	box.FocusLost:Connect(function(enterPressed)
		if enterPressed then
			pcall(settings.Callback, box.Text)
		end
	end)
end

----------------------------------------------------------------
-- âœ… AddDropdown
function GuiLib.AddDropdown(tab, settings)
	local dropdown = Instance.new("TextButton", tab)
	dropdown.Size = UDim2.new(1, -20, 0, 35)
	dropdown.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	dropdown.Text = "â–¼ " .. (settings.Name or "Ø§Ø®ØªÙŠØ§Ø±")
	dropdown.TextColor3 = Color3.fromRGB(255, 255, 255)
	dropdown.TextScaled = true
	dropdown.Font = Enum.Font.Gotham
	Instance.new("UICorner", dropdown).CornerRadius = UDim.new(0, 6)

	local open = false
	local buttons = {}

	dropdown.MouseButton1Click:Connect(function()
		open = not open
		for _, b in pairs(buttons) do b.Visible = open end
	end)

	for _, item in pairs(settings.Options) do
		local opt = Instance.new("TextButton", tab)
		opt.Size = UDim2.new(1, -40, 0, 30)
		opt.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
		opt.Text = "â€¢ " .. item
		opt.TextColor3 = Color3.fromRGB(200, 200, 200)
		opt.Font = Enum.Font.Gotham
		opt.TextScaled = true
		opt.Visible = false
		Instance.new("UICorner", opt).CornerRadius = UDim.new(0, 5)

		opt.MouseButton1Click:Connect(function()
			dropdown.Text = "âœ” " .. item
			pcall(settings.Callback, item)
			for _, b in pairs(buttons) do b.Visible = false end
			open = false
		end)

		table.insert(buttons, opt)
	end
end

----------------------------------------------------------------
-- âœ… Drag system (ØªØ­Ø±ÙŠÙƒ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©)
local function MakeDraggable(frame)
	local dragging, dragInput, dragStart, startPos

	frame.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = frame.Position

			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)

	frame.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement then
			dragInput = input
		end
	end)

	UIS.InputChanged:Connect(function(input)
		if input == dragInput and dragging then
			local delta = input.Position - dragStart
			frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end)
end

-- [ Ø²Ø± Minimize (ØªØµØºÙŠØ±) ]
local MinimizeButton = Instance.new("TextButton", MainFrame)
MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
MinimizeButton.Position = UDim2.new(1, -40, 0, 5)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
MinimizeButton.Text = "_"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.TextScaled = true
MinimizeButton.Font = Enum.Font.GothamBold
Instance.new("UICorner", MinimizeButton).CornerRadius = UDim.new(0, 6)

local isMinimized = false

MinimizeButton.MouseButton1Click:Connect(function()
	if isMinimized then
		MainFrame.Size = UDim2.new(0, 600, 0, 400)
		isMinimized = false
	else
		MainFrame.Size = UDim2.new(0, 600, 0, 40)
		isMinimized = true
	end
end)

-- [ Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ù„Ø¥Ø®ÙØ§Ø¡ ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡Ø§]
local HideButton = Instance.new("ImageButton", MainFrame)
HideButton.Size = UDim2.new(0, 30, 0, 30)
HideButton.Position = UDim2.new(1, -70, 0, 5)
HideButton.BackgroundTransparency = 1
HideButton.Image = "rbxassetid://15507434243" -- Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯Ù‡Ø§

local isHidden = false

HideButton.MouseButton1Click:Connect(function()
	if isHidden then
		-- Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
		MainFrame.Visible = true
		isHidden = false
	else
		-- Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
		MainFrame.Visible = false
		isHidden = true
	end
end)

-- Ø¬Ø¹Ù„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ­Ø±ÙŠÙƒ
MakeDraggable(MainFrame)

----------------------------------------------------------------
return GuiLib
